# Развёртывание IPTV FastAPI-плеера на Render.com

## 1. Подготовка репозитория

1. Убедитесь, что в корне проекта есть файлы:
   - `main.py` (основной код FastAPI)
   - `requirements.txt` (зависимости)
   - `templates/` (шаблоны)
   - `static/` (статические файлы)
   - `local.m3u` (ваш плейлист)

2. (Рекомендуется) Инициализируйте git-репозиторий и загрузите проект на GitHub, GitLab или Bitbucket:
   ```sh
   git init
   git add .
   git commit -m "init"
   git remote add origin <ваш-репозиторий>
   git push -u origin master
   ```

## 2. Регистрация и вход на Render.com

1. Перейдите на https://render.com
2. Зарегистрируйтесь или войдите через GitHub/GitLab/Bitbucket.

## 3. Создание нового Web Service

1. Нажмите **New +** → **Web Service**.
2. Выберите ваш репозиторий с проектом.
3. Заполните форму:
   - **Name**: любое имя (например, `iptv-fastapi`)
   - **Region**: ближайший к вашей аудитории
   - **Branch**: `master` или `main`
   - **Root Directory**: оставьте пустым, если `main.py` в корне
   - **Build Command**: оставьте пустым (Render сам установит зависимости из `requirements.txt`)
   - **Start Command**: 
     ```sh
     uvicorn main:app --host 0.0.0.0 --port 10000
     ```
     (или другой порт, если Render предложит)
   - **Instance Type**: Free или Starter (по желанию)

4. Нажмите **Create Web Service**.

## 4. Настройка переменных окружения (опционально)

Если нужны переменные (например, секреты), добавьте их на вкладке **Environment**.

## 5. Ожидание деплоя

Render автоматически установит зависимости и запустит приложение. Через 2-5 минут появится публичный URL вида:
```
https://<your-app-name>.onrender.com
```

## 6. Проверка работы

1. Перейдите по публичному URL.
2. Должна открыться страница IPTV-плеера.
3. Если не работает:
   - Проверьте логи на вкладке **Logs**
   - Убедитесь, что порт в команде запуска совпадает с портом Render (обычно 10000)
   - Проверьте структуру проекта и наличие всех файлов

## 7. Особенности

- **Плейлист local.m3u**: если он большой, можно хранить его в приватном S3/Google Drive и подгружать через код.
- **CORS**: прокси реализован в `/proxy` для обхода ограничений.
- **Обновление кода**: просто пушьте изменения в репозиторий — Render сам пересоберёт сервис.

## 8. Пример requirements.txt

```
fastapi==0.110.0
uvicorn==0.27.1
jinja2==3.1.3
httpx==0.28.1
```

## 9. Пример структуры проекта

```
/ (корень)
├── main.py
├── requirements.txt
├── local.m3u
├── templates/
│   └── index.html
├── static/
│   ├── style.css
│   └── js/
│       └── player.js (если нужен)
```

---

**Готово! Ваш IPTV-плеер теперь доступен онлайн.** 